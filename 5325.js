"use strict";(self.webpackChunkonsenui_v2_react_minimum=self.webpackChunkonsenui_v2_react_minimum||[]).push([[5325],{8461:(t,e,r)=>{function a(t,e){"accDescr"in t&&t.accDescr&&e.setAccDescription?.(t.accDescr),"accTitle"in t&&t.accTitle&&e.setAccTitle?.(t.accTitle),"title"in t&&t.title&&e.setDiagramTitle?.(t.title)}r.d(e,{S:()=>a}),(0,r(9610).K2)(a,"populateCommonDb")},5325:(t,e,r)=>{r.d(e,{diagram:()=>w});var a=r(8461),n=r(4208),l=r(1243),o=r(4584),i=r(9838),d=r(9610),s={elements:[]},c=structuredClone(s),m=i.UI.array,x=(0,d.K2)((()=>(0,o.$t)({...m,...(0,i.zj)().array})),"getConfig"),p=(0,d.K2)((()=>c.elements),"getArray"),u={addElement:(0,d.K2)((t=>{c.elements.push(t)}),"addElement"),getArray:p,getConfig:x,clear:(0,d.K2)((()=>{(0,i.IU)(),c=structuredClone(s)}),"clear"),setAccTitle:i.SV,getAccTitle:i.iN,setDiagramTitle:i.ke,getDiagramTitle:i.ab,getAccDescription:i.m7,setAccDescription:i.EI},b=(0,d.K2)((t=>{(0,a.S)(t,u);for(const e of t.elements){const r=t.elements.indexOf(e);if(r<0)throw new Error(`Array index ${r} is invalid. Index must be non-negative.`);i.Rm.debug(`Array element at index ${r} with value ${e.value}`),u.addElement({index:r,value:e.value,arrow:!!e.arrow,context:e.context||void 0,color:e.color||"none"})}}),"populate"),f={parse:async t=>{const e=await(0,n.q)("array",t);i.Rm.debug(e),b(e)}},g=(0,d.K2)(((t,e,r,a)=>{const n=a.db,o=n.getConfig(),{elementColor:d,borderColor:s,borderWidth:c,labelColor:m,labelFontSize:x}=o,p=n.getArray(),u=a.text.toLowerCase().includes("showindex"),b=n.getDiagramTitle(),f=(0,l.D)(e);f.attr("viewbox","0 0 800 300"),(0,i.a$)(f,300,800,o.useMaxWidth),y(f);for(const[t,e]of p.entries())h(f,e,t,o,u);b&&f.append("text").text(b).attr("x",400).attr("y",25).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","arrayTitle")}),"draw"),h=(0,d.K2)(((t,e,r,{elementColor:a,borderColor:n,borderWidth:l,labelColor:o,labelFontSize:i},s)=>{const c=t.append("g"),m=50*r+50,x=(0,d.K2)((t=>{switch(t){case"blue":return"rgba(0, 0, 255, 0.3)";case"red":return"rgba(255, 0, 0, 0.3)";case"green":return"rgba(0, 255, 0, 0.3)";default:return"none"}}),"getColor");if(e.arrow){const t=60,r=90;c.append("line").attr("x1",m+20).attr("y1",t).attr("x2",m+20).attr("y2",r).attr("stroke","black").attr("marker-end","url(#arrowhead)"),e.context&&c.append("text").attr("x",m+20).attr("y",t-10).attr("fill",o).attr("font-size",i).attr("dominant-baseline","hanging").attr("text-anchor","middle").attr("class","arrowContext").text(e.context)}c.append("rect").attr("x",m).attr("y",100).attr("width",40).attr("height",40).style("fill",x(e.color?e.color:"none")).attr("stroke","#69b3a2").attr("stroke-width","3px").attr("class","arrayElement"),c.append("text").attr("x",m+20).attr("y",120).attr("fill",o).attr("font-size",i).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","elementLabel").text(e.value),s&&c.append("text").attr("x",m+20).attr("y",160).attr("fill",o).attr("font-size",25).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","indexLabel").text(r)}),"drawElement"),y=(0,d.K2)((t=>{t.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 0 10 10").attr("refX","5").attr("refY","5").attr("markerWidth","6").attr("markerHeight","6").attr("orient","auto-start-reverse").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("fill","black")}),"defineArrowhead"),w={parser:f,db:u,renderer:{draw:g},styles:(0,d.K2)(((t={})=>(i.Rm.debug({options:t}),`\n    .element {\n      font-size: ${t.array?.elementFontSize??"10px"};\n      fill: ${t.array?.valueColor??"black"};\n    }\n    .element.index {\n      fill: ${t.array?.indexColor??"black"};\n    }\n    .element {\n      stroke: ${t.array?.elementStrokeColor??"black"};\n      stroke-width: ${t.array?.elementStrokeWidth??"1"};\n      fill: ${t.array?.elementFillColor??"#efefef"};\n    }\n  `)),"styles")}}}]);