"use strict";(self.webpackChunkonsenui_v2_react_minimum=self.webpackChunkonsenui_v2_react_minimum||[]).push([[8498],{6412:(e,n,t)=>{t.d(n,{T:()=>c});var r=t(6836),i=t(6430),o=t(5504),s=t(6852),d="\0",u="\0",a="",c=class{static{(0,s.K2)(this,"Graph")}constructor(e={}){this._isDirected=!(0,r.ly)(e,"directed")||e.directed,this._isMultigraph=!!(0,r.ly)(e,"multigraph")&&e.multigraph,this._isCompound=!!(0,r.ly)(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=(0,o.pp)(void 0),this._defaultEdgeLabelFn=(0,o.pp)(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[u]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return(0,o.zw)(e)||(e=(0,o.pp)(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return(0,r.Rz)(this._nodes)}sources(){var e=this;return(0,r.B2)(this.nodes(),(function(n){return(0,i._S)(e._in[n])}))}sinks(){var e=this;return(0,r.B2)(this.nodes(),(function(n){return(0,i._S)(e._out[n])}))}setNodes(e,n){var t=arguments,i=this;return(0,r.jU)(e,(function(e){t.length>1?i.setNode(e,n):i.setNode(e)})),this}setNode(e,n){return(0,r.ly)(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=n),this):(this._nodes[e]=arguments.length>1?n:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=u,this._children[e]={},this._children[u][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return(0,r.ly)(this._nodes,e)}removeNode(e){var n=this;if((0,r.ly)(this._nodes,e)){var t=(0,s.K2)((function(e){n.removeEdge(n._edgeObjs[e])}),"removeEdge");delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],(0,r.jU)(this.children(e),(function(e){n.setParent(e)})),delete this._children[e]),(0,r.jU)((0,r.Rz)(this._in[e]),t),delete this._in[e],delete this._preds[e],(0,r.jU)((0,r.Rz)(this._out[e]),t),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if((0,r.nT)(n))n=u;else{for(var t=n+="";!(0,r.nT)(t);t=this.parent(t))if(t===e)throw new Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=n,this._children[n][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var n=this._parent[e];if(n!==u)return n}}children(e){if((0,r.nT)(e)&&(e=u),this._isCompound){var n=this._children[e];if(n)return(0,r.Rz)(n)}else{if(e===u)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var n=this._preds[e];if(n)return(0,r.Rz)(n)}successors(e){var n=this._sucs[e];if(n)return(0,r.Rz)(n)}neighbors(e){var n=this.predecessors(e);if(n)return(0,r.gy)(n,this.successors(e))}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var t=this;(0,r.jU)(this._nodes,(function(t,r){e(r)&&n.setNode(r,t)})),(0,r.jU)(this._edgeObjs,(function(e){n.hasNode(e.v)&&n.hasNode(e.w)&&n.setEdge(e,t.edge(e))}));var i={};function o(e){var r=t.parent(e);return void 0===r||n.hasNode(r)?(i[e]=r,r):r in i?i[r]:o(r)}return(0,s.K2)(o,"findParent"),this._isCompound&&(0,r.jU)(n.nodes(),(function(e){n.setParent(e,o(e))})),n}setDefaultEdgeLabel(e){return(0,o.zw)(e)||(e=(0,o.pp)(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return(0,r.dq)(this._edgeObjs)}setPath(e,n){var t=this,i=arguments;return(0,r.dY)(e,(function(e,r){return i.length>1?t.setEdge(e,r,n):t.setEdge(e,r),r})),this}setEdge(){var e,n,t,i,o=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(e=s.v,n=s.w,t=s.name,2===arguments.length&&(i=arguments[1],o=!0)):(e=s,n=arguments[1],t=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),e=""+e,n=""+n,(0,r.nT)(t)||(t=""+t);var d=g(this._isDirected,e,n,t);if((0,r.ly)(this._edgeLabels,d))return o&&(this._edgeLabels[d]=i),this;if(!(0,r.nT)(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(n),this._edgeLabels[d]=o?i:this._defaultEdgeLabelFn(e,n,t);var u=l(this._isDirected,e,n,t);return e=u.v,n=u.w,Object.freeze(u),this._edgeObjs[d]=u,h(this._preds[n],e),h(this._sucs[e],n),this._in[n][d]=u,this._out[e][d]=u,this._edgeCount++,this}edge(e,n,t){var r=1===arguments.length?v(this._isDirected,arguments[0]):g(this._isDirected,e,n,t);return this._edgeLabels[r]}hasEdge(e,n,t){var i=1===arguments.length?v(this._isDirected,arguments[0]):g(this._isDirected,e,n,t);return(0,r.ly)(this._edgeLabels,i)}removeEdge(e,n,t){var r=1===arguments.length?v(this._isDirected,arguments[0]):g(this._isDirected,e,n,t),i=this._edgeObjs[r];return i&&(e=i.v,n=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],f(this._preds[n],e),f(this._sucs[e],n),delete this._in[n][r],delete this._out[e][r],this._edgeCount--),this}inEdges(e,n){var t=this._in[e];if(t){var i=(0,r.dq)(t);return n?(0,r.B2)(i,(function(e){return e.v===n})):i}}outEdges(e,n){var t=this._out[e];if(t){var i=(0,r.dq)(t);return n?(0,r.B2)(i,(function(e){return e.w===n})):i}}nodeEdges(e,n){var t=this.inEdges(e,n);if(t)return t.concat(this.outEdges(e,n))}};function h(e,n){e[n]?e[n]++:e[n]=1}function f(e,n){--e[n]||delete e[n]}function g(e,n,t,i){var o=""+n,s=""+t;if(!e&&o>s){var u=o;o=s,s=u}return o+a+s+a+((0,r.nT)(i)?d:i)}function l(e,n,t,r){var i=""+n,o=""+t;if(!e&&i>o){var s=i;i=o,o=s}var d={v:i,w:o};return r&&(d.name=r),d}function v(e,n){return g(e,n.v,n.w,n.name)}c.prototype._nodeCount=0,c.prototype._edgeCount=0,(0,s.K2)(h,"incrementOrInitEntry"),(0,s.K2)(f,"decrementOrRemoveEntry"),(0,s.K2)(g,"edgeArgsToId"),(0,s.K2)(l,"edgeArgsToObj"),(0,s.K2)(v,"edgeObjToId")},8498:(e,n,t)=>{t.d(n,{Z:()=>an});var r=t(6412),i=t(6836),o=t(5504),s=t(6852);function d(e,n,t,r){var o;do{o=(0,i.Re)(r)}while(e.hasNode(o));return t.dummy=n,e.setNode(o,t),o}function u(e){var n=(new r.T).setGraph(e.graph());return(0,i.jU)(e.nodes(),(function(t){n.setNode(t,e.node(t))})),(0,i.jU)(e.edges(),(function(t){var r=n.edge(t.v,t.w)||{weight:0,minlen:1},i=e.edge(t);n.setEdge(t.v,t.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),n}function a(e){var n=new r.T({multigraph:e.isMultigraph()}).setGraph(e.graph());return(0,i.jU)(e.nodes(),(function(t){e.children(t).length||n.setNode(t,e.node(t))})),(0,i.jU)(e.edges(),(function(t){n.setEdge(t,e.edge(t))})),n}function c(e,n){var t,r,i=e.x,o=e.y,s=n.x-i,d=n.y-o,u=e.width/2,a=e.height/2;if(!s&&!d)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(d)*u>Math.abs(s)*a?(d<0&&(a=-a),t=a*s/d,r=a):(s<0&&(u=-u),t=u,r=u*d/s),{x:i+t,y:o+r}}function h(e){var n=(0,i.LG)((0,i.EB)(v(e)+1),(function(){return[]}));return(0,i.jU)(e.nodes(),(function(t){var r=e.node(t),o=r.rank;(0,i.nT)(o)||(n[o][r.order]=t)})),n}function f(e){var n=(0,i.F)((0,i.LG)(e.nodes(),(function(n){return e.node(n).rank})));(0,i.jU)(e.nodes(),(function(t){var r=e.node(t);(0,i.ly)(r,"rank")&&(r.rank-=n)}))}function g(e){var n=(0,i.F)((0,i.LG)(e.nodes(),(function(n){return e.node(n).rank}))),t=[];(0,i.jU)(e.nodes(),(function(r){var i=e.node(r).rank-n;t[i]||(t[i]=[]),t[i].push(r)}));var r=0,o=e.graph().nodeRankFactor;(0,i.jU)(t,(function(n,t){(0,i.nT)(n)&&t%o!=0?--r:r&&(0,i.jU)(n,(function(n){e.node(n).rank+=r}))}))}function l(e,n,t,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=r),d(e,"border",i,n)}function v(e){return(0,i.Jh)((0,i.LG)(e.nodes(),(function(n){var t=e.node(n).rank;if(!(0,i.nT)(t))return t})))}function p(e,n){var t={lhs:[],rhs:[]};return(0,i.jU)(e,(function(e){n(e)?t.lhs.push(e):t.rhs.push(e)})),t}function m(e,n){var t=(0,i.DJ)();try{return n()}finally{console.log(e+" time: "+((0,i.DJ)()-t)+"ms")}}function w(e,n){return n()}function b(e){function n(t){var r=e.children(t),o=e.node(t);if(r.length&&(0,i.jU)(r,n),(0,i.ly)(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,d=o.maxRank+1;s<d;++s)y(e,"borderLeft","_bl",t,o,s),y(e,"borderRight","_br",t,o,s)}}(0,s.K2)(n,"dfs"),(0,i.jU)(e.children(),n)}function y(e,n,t,r,i,o){var s={width:0,height:0,rank:o,borderType:n},u=i[n][o-1],a=d(e,"border",s,t);i[n][o]=a,e.setParent(a,r),u&&e.setEdge(u,a,{weight:1})}function _(e){var n=e.graph().rankdir.toLowerCase();"lr"!==n&&"rl"!==n||j(e)}function K(e){var n=e.graph().rankdir.toLowerCase();"bt"!==n&&"rl"!==n||U(e),"lr"!==n&&"rl"!==n||(N(e),j(e))}function j(e){(0,i.jU)(e.nodes(),(function(n){E(e.node(n))})),(0,i.jU)(e.edges(),(function(n){E(e.edge(n))}))}function E(e){var n=e.width;e.width=e.height,e.height=n}function U(e){(0,i.jU)(e.nodes(),(function(n){k(e.node(n))})),(0,i.jU)(e.edges(),(function(n){var t=e.edge(n);(0,i.jU)(t.points,k),(0,i.ly)(t,"y")&&k(t)}))}function k(e){e.y=-e.y}function N(e){(0,i.jU)(e.nodes(),(function(n){x(e.node(n))})),(0,i.jU)(e.edges(),(function(n){var t=e.edge(n);(0,i.jU)(t.points,x),(0,i.ly)(t,"x")&&x(t)}))}function x(e){var n=e.x;e.x=e.y,e.y=n}(0,s.K2)(d,"addDummyNode"),(0,s.K2)(u,"simplify"),(0,s.K2)(a,"asNonCompoundGraph"),(0,s.K2)(c,"intersectRect"),(0,s.K2)(h,"buildLayerMatrix"),(0,s.K2)(f,"normalizeRanks"),(0,s.K2)(g,"removeEmptyRanks"),(0,s.K2)(l,"addBorderNode"),(0,s.K2)(v,"maxRank"),(0,s.K2)(p,"partition"),(0,s.K2)(m,"time"),(0,s.K2)(w,"notime"),(0,s.K2)(b,"addBorderSegments"),(0,s.K2)(y,"addBorderNode"),(0,s.K2)(_,"adjust"),(0,s.K2)(K,"undo"),(0,s.K2)(j,"swapWidthHeight"),(0,s.K2)(E,"swapWidthHeightOne"),(0,s.K2)(U,"reverseY"),(0,s.K2)(k,"reverseYOne"),(0,s.K2)(N,"swapXY"),(0,s.K2)(x,"swapXYOne");var L=class{static{(0,s.K2)(this,"List")}constructor(){var e={};e._next=e._prev=e,this._sentinel=e}dequeue(){var e=this._sentinel,n=e._prev;if(n!==e)return C(n),n}enqueue(e){var n=this._sentinel;e._prev&&e._next&&C(e),e._next=n._next,n._next._prev=e,n._next=e,e._prev=n}toString(){for(var e=[],n=this._sentinel,t=n._prev;t!==n;)e.push(JSON.stringify(t,T)),t=t._prev;return"["+e.join(", ")+"]"}};function C(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function T(e,n){if("_next"!==e&&"_prev"!==e)return n}(0,s.K2)(C,"unlink"),(0,s.K2)(T,"filterOutLinks");var R=(0,o.pp)(1);function I(e,n){if(e.nodeCount()<=1)return[];var t=M(e,n||R),r=G(t.graph,t.buckets,t.zeroIdx);return(0,i.Nz)((0,i.LG)(r,(function(n){return e.outEdges(n.v,n.w)})))}function G(e,n,t){for(var r,i=[],o=n[n.length-1],s=n[0];e.nodeCount();){for(;r=s.dequeue();)S(e,n,t,r);for(;r=o.dequeue();)S(e,n,t,r);if(e.nodeCount())for(var d=n.length-2;d>0;--d)if(r=n[d].dequeue()){i=i.concat(S(e,n,t,r,!0));break}}return i}function S(e,n,t,r,o){var s=o?[]:void 0;return(0,i.jU)(e.inEdges(r.v),(function(r){var i=e.edge(r),d=e.node(r.v);o&&s.push({v:r.v,w:r.w}),d.out-=i,B(n,t,d)})),(0,i.jU)(e.outEdges(r.v),(function(r){var i=e.edge(r),o=r.w,s=e.node(o);s.in-=i,B(n,t,s)})),e.removeNode(r.v),s}function M(e,n){var t=new r.T,o=0,s=0;(0,i.jU)(e.nodes(),(function(e){t.setNode(e,{v:e,in:0,out:0})})),(0,i.jU)(e.edges(),(function(e){var r=t.edge(e.v,e.w)||0,i=n(e),d=r+i;t.setEdge(e.v,e.w,d),s=Math.max(s,t.node(e.v).out+=i),o=Math.max(o,t.node(e.w).in+=i)}));var d=(0,i.EB)(s+o+3).map((function(){return new L})),u=o+1;return(0,i.jU)(t.nodes(),(function(e){B(d,u,t.node(e))})),{graph:t,buckets:d,zeroIdx:u}}function B(e,n,t){t.out?t.in?e[t.out-t.in+n].enqueue(t):e[e.length-1].enqueue(t):e[0].enqueue(t)}function F(e){var n="greedy"===e.graph().acyclicer?I(e,t(e)):O(e);function t(e){return function(n){return e.edge(n).weight}}(0,i.jU)(n,(function(n){var t=e.edge(n);e.removeEdge(n),t.forwardName=n.name,t.reversed=!0,e.setEdge(n.w,n.v,t,(0,i.Re)("rev"))})),(0,s.K2)(t,"weightFn")}function O(e){var n=[],t={},r={};function o(s){(0,i.ly)(r,s)||(r[s]=!0,t[s]=!0,(0,i.jU)(e.outEdges(s),(function(e){(0,i.ly)(t,e.w)?n.push(e):o(e.w)})),delete t[s])}return(0,s.K2)(o,"dfs"),(0,i.jU)(e.nodes(),o),n}function P(e){(0,i.jU)(e.edges(),(function(n){var t=e.edge(n);if(t.reversed){e.removeEdge(n);var r=t.forwardName;delete t.reversed,delete t.forwardName,e.setEdge(n.w,n.v,t,r)}}))}function D(e){e.graph().dummyChains=[],(0,i.jU)(e.edges(),(function(n){z(e,n)}))}function z(e,n){var t=n.v,r=e.node(t).rank,i=n.w,o=e.node(i).rank,s=n.name,u=e.edge(n),a=u.labelRank;if(o!==r+1){var c,h,f;for(e.removeEdge(n),f=0,++r;r<o;++f,++r)u.points=[],c=d(e,"edge",h={width:0,height:0,edgeLabel:u,edgeObj:n,rank:r},"_d"),r===a&&(h.width=u.width,h.height=u.height,h.dummy="edge-label",h.labelpos=u.labelpos),e.setEdge(t,c,{weight:u.weight},s),0===f&&e.graph().dummyChains.push(c),t=c;e.setEdge(t,i,{weight:u.weight},s)}}function Y(e){(0,i.jU)(e.graph().dummyChains,(function(n){var t,r=e.node(n),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)t=e.successors(n)[0],e.removeNode(n),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),n=t,r=e.node(n)}))}function q(e){var n={};function t(r){var o=e.node(r);if((0,i.ly)(n,r))return o.rank;n[r]=!0;var s=(0,i.F)((0,i.LG)(e.outEdges(r),(function(n){return t(n.w)-e.edge(n).minlen})));return s!==Number.POSITIVE_INFINITY&&null!=s||(s=0),o.rank=s}(0,s.K2)(t,"dfs"),(0,i.jU)(e.sources(),t)}function V(e,n){return e.node(n.w).rank-e.node(n.v).rank-e.edge(n).minlen}function A(e){var n,t,i=new r.T({directed:!1}),o=e.nodes()[0],s=e.nodeCount();for(i.setNode(o,{});J(i,e)<s;)n=W(i,e),t=i.hasNode(n.v)?V(e,n):-V(e,n),X(i,e,t);return i}function J(e,n){function t(r){(0,i.jU)(n.nodeEdges(r),(function(i){var o=i.v,s=r===o?i.w:o;e.hasNode(s)||V(n,i)||(e.setNode(s,{}),e.setEdge(r,s,{}),t(s))}))}return(0,s.K2)(t,"dfs"),(0,i.jU)(e.nodes(),t),e.nodeCount()}function W(e,n){return(0,i.us)(n.edges(),(function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return V(n,t)}))}function X(e,n,t){(0,i.jU)(e.nodes(),(function(e){n.node(e).rank+=t}))}function H(e){var n={},t={},r=[];function o(s){if((0,i.ly)(t,s))throw new Z;(0,i.ly)(n,s)||(t[s]=!0,n[s]=!0,(0,i.jU)(e.predecessors(s),o),delete t[s],r.push(s))}if((0,s.K2)(o,"visit"),(0,i.jU)(e.sinks(),o),(0,i.C7)(n)!==e.nodeCount())throw new Z;return r}function Z(){}function Q(e,n,t){(0,o._i)(n)||(n=[n]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),s=[],d={};return(0,i.jU)(n,(function(n){if(!e.hasNode(n))throw new Error("Graph does not have node: "+n);$(e,n,"post"===t,d,r,s)})),s}function $(e,n,t,r,o,s){(0,i.ly)(r,n)||(r[n]=!0,t||s.push(n),(0,i.jU)(o(n),(function(n){$(e,n,t,r,o,s)})),t&&s.push(n))}function ee(e,n){return Q(e,n,"post")}function ne(e,n){return Q(e,n,"pre")}function te(e){q(e=u(e));var n,t=A(e);for(se(t),re(t,e);n=ue(t);)ce(t,e,n,ae(t,e,n))}function re(e,n){var t=ee(e,e.nodes());t=t.slice(0,t.length-1),(0,i.jU)(t,(function(t){ie(e,n,t)}))}function ie(e,n,t){var r=e.node(t).parent;e.edge(t,r).cutvalue=oe(e,n,t)}function oe(e,n,t){var r=e.node(t).parent,o=!0,s=n.edge(t,r),d=0;return s||(o=!1,s=n.edge(r,t)),d=s.weight,(0,i.jU)(n.nodeEdges(t),(function(i){var s=i.v===t,u=s?i.w:i.v;if(u!==r){var a=s===o,c=n.edge(i).weight;if(d+=a?c:-c,fe(e,t,u)){var h=e.edge(t,u).cutvalue;d+=a?-h:h}}})),d}function se(e,n){arguments.length<2&&(n=e.nodes()[0]),de(e,{},1,n)}function de(e,n,t,r,o){var s=t,d=e.node(r);return n[r]=!0,(0,i.jU)(e.neighbors(r),(function(o){(0,i.ly)(n,o)||(t=de(e,n,t,o,r))})),d.low=s,d.lim=t++,o?d.parent=o:delete d.parent,t}function ue(e){return(0,i.o3)(e.edges(),(function(n){return e.edge(n).cutvalue<0}))}function ae(e,n,t){var r=t.v,o=t.w;n.hasEdge(r,o)||(r=t.w,o=t.v);var s=e.node(r),d=e.node(o),u=s,a=!1;s.lim>d.lim&&(u=d,a=!0);var c=(0,i.B2)(n.edges(),(function(n){return a===ge(0,e.node(n.v),u)&&a!==ge(0,e.node(n.w),u)}));return(0,i.us)(c,(function(e){return V(n,e)}))}function ce(e,n,t,r){var i=t.v,o=t.w;e.removeEdge(i,o),e.setEdge(r.v,r.w,{}),se(e),re(e,n),he(e,n)}function he(e,n){var t=(0,i.o3)(e.nodes(),(function(e){return!n.node(e).parent})),r=ne(e,t);r=r.slice(1),(0,i.jU)(r,(function(t){var r=e.node(t).parent,i=n.edge(t,r),o=!1;i||(i=n.edge(r,t),o=!0),n.node(t).rank=n.node(r).rank+(o?i.minlen:-i.minlen)}))}function fe(e,n,t){return e.hasEdge(n,t)}function ge(e,n,t){return t.low<=n.lim&&n.lim<=t.lim}function le(e){switch(e.graph().ranker){case"network-simplex":default:me(e);break;case"tight-tree":pe(e);break;case"longest-path":ve(e)}}(0,s.K2)(I,"greedyFAS"),(0,s.K2)(G,"doGreedyFAS"),(0,s.K2)(S,"removeNode"),(0,s.K2)(M,"buildState"),(0,s.K2)(B,"assignBucket"),(0,s.K2)(F,"run"),(0,s.K2)(O,"dfsFAS"),(0,s.K2)(P,"undo"),(0,s.K2)(D,"run"),(0,s.K2)(z,"normalizeEdge"),(0,s.K2)(Y,"undo"),(0,s.K2)(q,"longestPath"),(0,s.K2)(V,"slack"),(0,s.K2)(A,"feasibleTree"),(0,s.K2)(J,"tightTree"),(0,s.K2)(W,"findMinSlackEdge"),(0,s.K2)(X,"shiftRanks"),(0,o.pp)(1),(0,o.pp)(1),H.CycleException=Z,(0,s.K2)(H,"topsort"),(0,s.K2)(Z,"CycleException"),Z.prototype=new Error,(0,s.K2)(Q,"dfs"),(0,s.K2)($,"doDfs"),(0,s.K2)(ee,"postorder"),(0,s.K2)(ne,"preorder"),te.initLowLimValues=se,te.initCutValues=re,te.calcCutValue=oe,te.leaveEdge=ue,te.enterEdge=ae,te.exchangeEdges=ce,(0,s.K2)(te,"networkSimplex"),(0,s.K2)(re,"initCutValues"),(0,s.K2)(ie,"assignCutValue"),(0,s.K2)(oe,"calcCutValue"),(0,s.K2)(se,"initLowLimValues"),(0,s.K2)(de,"dfsAssignLowLim"),(0,s.K2)(ue,"leaveEdge"),(0,s.K2)(ae,"enterEdge"),(0,s.K2)(ce,"exchangeEdges"),(0,s.K2)(he,"updateRanks"),(0,s.K2)(fe,"isTreeEdge"),(0,s.K2)(ge,"isDescendant"),(0,s.K2)(le,"rank");var ve=q;function pe(e){q(e),A(e)}function me(e){te(e)}function we(e){var n=d(e,"root",{},"_root"),t=ye(e),r=(0,i.Jh)((0,i.dq)(t))-1,o=2*r+1;e.graph().nestingRoot=n,(0,i.jU)(e.edges(),(function(n){e.edge(n).minlen*=o}));var s=_e(e)+1;(0,i.jU)(e.children(),(function(i){be(e,n,o,s,r,t,i)})),e.graph().nodeRankFactor=o}function be(e,n,t,r,o,s,d){var u=e.children(d);if(u.length){var a=l(e,"_bt"),c=l(e,"_bb"),h=e.node(d);e.setParent(a,d),h.borderTop=a,e.setParent(c,d),h.borderBottom=c,(0,i.jU)(u,(function(i){be(e,n,t,r,o,s,i);var u=e.node(i),h=u.borderTop?u.borderTop:i,f=u.borderBottom?u.borderBottom:i,g=u.borderTop?r:2*r,l=h!==f?1:o-s[d]+1;e.setEdge(a,h,{weight:g,minlen:l,nestingEdge:!0}),e.setEdge(f,c,{weight:g,minlen:l,nestingEdge:!0})})),e.parent(d)||e.setEdge(n,a,{weight:0,minlen:o+s[d]})}else d!==n&&e.setEdge(n,d,{weight:0,minlen:t})}function ye(e){var n={};function t(r,o){var s=e.children(r);s&&s.length&&(0,i.jU)(s,(function(e){t(e,o+1)})),n[r]=o}return(0,s.K2)(t,"dfs"),(0,i.jU)(e.children(),(function(e){t(e,1)})),n}function _e(e){return(0,i.dY)(e.edges(),(function(n,t){return n+e.edge(t).weight}),0)}function Ke(e){var n=e.graph();e.removeNode(n.nestingRoot),delete n.nestingRoot,(0,i.jU)(e.edges(),(function(n){e.edge(n).nestingEdge&&e.removeEdge(n)}))}function je(e,n,t){var r,o={};(0,i.jU)(t,(function(t){for(var i,s,d=e.parent(t);d;){if((i=e.parent(d))?(s=o[i],o[i]=d):(s=r,r=d),s&&s!==d)return void n.setEdge(s,d);d=i}}))}function Ee(e,n,t){var o=Ue(e),s=new r.T({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((function(n){return e.node(n)}));return(0,i.jU)(e.nodes(),(function(r){var d=e.node(r),u=e.parent(r);(d.rank===n||d.minRank<=n&&n<=d.maxRank)&&(s.setNode(r),s.setParent(r,u||o),(0,i.jU)(e[t](r),(function(n){var t=n.v===r?n.w:n.v,o=s.edge(t,r),d=(0,i.nT)(o)?0:o.weight;s.setEdge(t,r,{weight:e.edge(n).weight+d})})),(0,i.ly)(d,"minRank")&&s.setNode(r,{borderLeft:d.borderLeft[n],borderRight:d.borderRight[n]}))})),s}function Ue(e){for(var n;e.hasNode(n=(0,i.Re)("_root")););return n}function ke(e,n){for(var t=0,r=1;r<n.length;++r)t+=Ne(e,n[r-1],n[r]);return t}function Ne(e,n,t){for(var r=(0,i.P7)(t,(0,i.LG)(t,(function(e,n){return n}))),o=(0,i.Nz)((0,i.LG)(n,(function(n){return(0,i.u9)((0,i.LG)(e.outEdges(n),(function(n){return{pos:r[n.w],weight:e.edge(n).weight}})),"pos")}))),s=1;s<t.length;)s<<=1;var d=2*s-1;s-=1;var u=(0,i.LG)(new Array(d),(function(){return 0})),a=0;return(0,i.jU)(o.forEach((function(e){var n=e.pos+s;u[n]+=e.weight;for(var t=0;n>0;)n%2&&(t+=u[n+1]),u[n=n-1>>1]+=e.weight;a+=e.weight*t}))),a}function xe(e){var n={},t=(0,i.B2)(e.nodes(),(function(n){return!e.children(n).length})),r=(0,i.Jh)((0,i.LG)(t,(function(n){return e.node(n).rank}))),o=(0,i.LG)((0,i.EB)(r+1),(function(){return[]}));function d(t){if(!(0,i.ly)(n,t)){n[t]=!0;var r=e.node(t);o[r.rank].push(t),(0,i.jU)(e.successors(t),d)}}(0,s.K2)(d,"dfs");var u=(0,i.u9)(t,(function(n){return e.node(n).rank}));return(0,i.jU)(u,d),o}function Le(e,n){return(0,i.LG)(n,(function(n){var t=e.inEdges(n);if(t.length){var r=(0,i.dY)(t,(function(n,t){var r=e.edge(t),i=e.node(t.v);return{sum:n.sum+r.weight*i.order,weight:n.weight+r.weight}}),{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}return{v:n}}))}function Ce(e,n){var t={};return(0,i.jU)(e,(function(e,n){var r=t[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:n};(0,i.nT)(e.barycenter)||(r.barycenter=e.barycenter,r.weight=e.weight)})),(0,i.jU)(n.edges(),(function(e){var n=t[e.v],r=t[e.w];(0,i.nT)(n)||(0,i.nT)(r)||(r.indegree++,n.out.push(t[e.w]))})),Te((0,i.B2)(t,(function(e){return!e.indegree})))}function Te(e){var n=[];function t(e){return function(n){n.merged||((0,i.nT)(n.barycenter)||(0,i.nT)(e.barycenter)||n.barycenter>=e.barycenter)&&Re(e,n)}}function r(n){return function(t){t.in.push(n),0==--t.indegree&&e.push(t)}}for((0,s.K2)(t,"handleIn"),(0,s.K2)(r,"handleOut");e.length;){var o=e.pop();n.push(o),(0,i.jU)(o.in.reverse(),t(o)),(0,i.jU)(o.out,r(o))}return(0,i.LG)((0,i.B2)(n,(function(e){return!e.merged})),(function(e){return(0,i.su)(e,["vs","i","barycenter","weight"])}))}function Re(e,n){var t=0,r=0;e.weight&&(t+=e.barycenter*e.weight,r+=e.weight),n.weight&&(t+=n.barycenter*n.weight,r+=n.weight),e.vs=n.vs.concat(e.vs),e.barycenter=t/r,e.weight=r,e.i=Math.min(n.i,e.i),n.merged=!0}function Ie(e,n){var t=p(e,(function(e){return(0,i.ly)(e,"barycenter")})),r=t.lhs,o=(0,i.u9)(t.rhs,(function(e){return-e.i})),s=[],d=0,u=0,a=0;r.sort(Se(!!n)),a=Ge(s,o,a),(0,i.jU)(r,(function(e){a+=e.vs.length,s.push(e.vs),d+=e.barycenter*e.weight,u+=e.weight,a=Ge(s,o,a)}));var c={vs:(0,i.Nz)(s)};return u&&(c.barycenter=d/u,c.weight=u),c}function Ge(e,n,t){for(var r;n.length&&(r=(0,i.fK)(n)).i<=t;)n.pop(),e.push(r.vs),t++;return t}function Se(e){return function(n,t){return n.barycenter<t.barycenter?-1:n.barycenter>t.barycenter?1:e?t.i-n.i:n.i-t.i}}function Me(e,n,t,r){var o=e.children(n),s=e.node(n),d=s?s.borderLeft:void 0,u=s?s.borderRight:void 0,a={};d&&(o=(0,i.B2)(o,(function(e){return e!==d&&e!==u})));var c=Le(e,o);(0,i.jU)(c,(function(n){if(e.children(n.v).length){var o=Me(e,n.v,t,r);a[n.v]=o,(0,i.ly)(o,"barycenter")&&Fe(n,o)}}));var h=Ce(c,t);Be(h,a);var f=Ie(h,r);if(d&&(f.vs=(0,i.Nz)([d,f.vs,u]),e.predecessors(d).length)){var g=e.node(e.predecessors(d)[0]),l=e.node(e.predecessors(u)[0]);(0,i.ly)(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+g.order+l.order)/(f.weight+2),f.weight+=2}return f}function Be(e,n){(0,i.jU)(e,(function(e){e.vs=(0,i.Nz)(e.vs.map((function(e){return n[e]?n[e].vs:e})))}))}function Fe(e,n){(0,i.nT)(e.barycenter)?(e.barycenter=n.barycenter,e.weight=n.weight):(e.barycenter=(e.barycenter*e.weight+n.barycenter*n.weight)/(e.weight+n.weight),e.weight+=n.weight)}function Oe(e){var n=v(e),t=Pe(e,(0,i.EB)(1,n+1),"inEdges"),r=Pe(e,(0,i.EB)(n-1,-1,-1),"outEdges"),o=xe(e);ze(e,o);for(var s,d=Number.POSITIVE_INFINITY,u=0,a=0;a<4;++u,++a){De(u%2?t:r,u%4>=2);var c=ke(e,o=h(e));c<d&&(a=0,s=(0,i.Kn)(o),d=c)}ze(e,s)}function Pe(e,n,t){return(0,i.LG)(n,(function(n){return Ee(e,n,t)}))}function De(e,n){var t=new r.T;(0,i.jU)(e,(function(e){var r=e.graph().root,o=Me(e,r,t,n);(0,i.jU)(o.vs,(function(n,t){e.node(n).order=t})),je(e,t,o.vs)}))}function ze(e,n){(0,i.jU)(n,(function(n){(0,i.jU)(n,(function(n,t){e.node(n).order=t}))}))}function Ye(e){var n=Ve(e);(0,i.jU)(e.graph().dummyChains,(function(t){for(var r=e.node(t),i=r.edgeObj,o=qe(e,n,i.v,i.w),s=o.path,d=o.lca,u=0,a=s[u],c=!0;t!==i.w;){if(r=e.node(t),c){for(;(a=s[u])!==d&&e.node(a).maxRank<r.rank;)u++;a===d&&(c=!1)}if(!c){for(;u<s.length-1&&e.node(a=s[u+1]).minRank<=r.rank;)u++;a=s[u]}e.setParent(t,a),t=e.successors(t)[0]}}))}function qe(e,n,t,r){var i,o,s=[],d=[],u=Math.min(n[t].low,n[r].low),a=Math.max(n[t].lim,n[r].lim);i=t;do{i=e.parent(i),s.push(i)}while(i&&(n[i].low>u||a>n[i].lim));for(o=i,i=r;(i=e.parent(i))!==o;)d.push(i);return{path:s.concat(d.reverse()),lca:o}}function Ve(e){var n={},t=0;function r(o){var s=t;(0,i.jU)(e.children(o),r),n[o]={low:s,lim:t++}}return(0,s.K2)(r,"dfs"),(0,i.jU)(e.children(),r),n}function Ae(e,n){var t={};function r(n,r){var o=0,s=0,d=n.length,u=(0,i.fK)(r);return(0,i.jU)(r,(function(n,a){var c=We(e,n),h=c?e.node(c).order:d;(c||n===u)&&((0,i.jU)(r.slice(s,a+1),(function(n){(0,i.jU)(e.predecessors(n),(function(r){var i=e.node(r),s=i.order;!(s<o||h<s)||i.dummy&&e.node(n).dummy||Xe(t,r,n)}))})),s=a+1,o=h)})),r}return(0,s.K2)(r,"visitLayer"),(0,i.dY)(n,r),t}function Je(e,n){var t={};function r(n,r,o,s,d){var u;(0,i.jU)((0,i.EB)(r,o),(function(r){u=n[r],e.node(u).dummy&&(0,i.jU)(e.predecessors(u),(function(n){var r=e.node(n);r.dummy&&(r.order<s||r.order>d)&&Xe(t,n,u)}))}))}function o(n,t){var o,s=-1,d=0;return(0,i.jU)(t,(function(i,u){if("border"===e.node(i).dummy){var a=e.predecessors(i);a.length&&(o=e.node(a[0]).order,r(t,d,u,s,o),d=u,s=o)}r(t,d,t.length,o,n.length)})),t}return(0,s.K2)(r,"scan"),(0,s.K2)(o,"visitLayer"),(0,i.dY)(n,o),t}function We(e,n){if(e.node(n).dummy)return(0,i.o3)(e.predecessors(n),(function(n){return e.node(n).dummy}))}function Xe(e,n,t){if(n>t){var r=n;n=t,t=r}var i=e[n];i||(e[n]=i={}),i[t]=!0}function He(e,n,t){if(n>t){var r=n;n=t,t=r}return(0,i.ly)(e[n],t)}function Ze(e,n,t,r){var o={},s={},d={};return(0,i.jU)(n,(function(e){(0,i.jU)(e,(function(e,n){o[e]=e,s[e]=e,d[e]=n}))})),(0,i.jU)(n,(function(e){var n=-1;(0,i.jU)(e,(function(e){var u=r(e);if(u.length)for(var a=((u=(0,i.u9)(u,(function(e){return d[e]}))).length-1)/2,c=Math.floor(a),h=Math.ceil(a);c<=h;++c){var f=u[c];s[e]===e&&n<d[f]&&!He(t,e,f)&&(s[f]=e,s[e]=o[e]=o[f],n=d[f])}}))})),{root:o,align:s}}function Qe(e,n,t,r,o){var d={},u=$e(e,n,t,o),a=o?"borderLeft":"borderRight";function c(e,n){for(var t=u.nodes(),r=t.pop(),i={};r;)i[r]?e(r):(i[r]=!0,t.push(r),t=t.concat(n(r))),r=t.pop()}function h(e){d[e]=u.inEdges(e).reduce((function(e,n){return Math.max(e,d[n.v]+u.edge(n))}),0)}function f(n){var t=u.outEdges(n).reduce((function(e,n){return Math.min(e,d[n.w]-u.edge(n))}),Number.POSITIVE_INFINITY),r=e.node(n);t!==Number.POSITIVE_INFINITY&&r.borderType!==a&&(d[n]=Math.max(d[n],t))}return(0,s.K2)(c,"iterate"),(0,s.K2)(h,"pass1"),(0,s.K2)(f,"pass2"),c(h,u.predecessors.bind(u)),c(f,u.successors.bind(u)),(0,i.jU)(r,(function(e){d[e]=d[t[e]]})),d}function $e(e,n,t,o){var s=new r.T,d=e.graph(),u=on(d.nodesep,d.edgesep,o);return(0,i.jU)(n,(function(n){var r;(0,i.jU)(n,(function(n){var i=t[n];if(s.setNode(i),r){var o=t[r],d=s.edge(o,i);s.setEdge(o,i,Math.max(u(e,n,r),d||0))}r=n}))})),s}function en(e,n){return(0,i.us)((0,i.dq)(n),(function(n){var t=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return(0,i.Fm)(n,(function(n,i){var o=sn(e,i)/2;t=Math.max(n+o,t),r=Math.min(n-o,r)})),t-r}))}function nn(e,n){var t=(0,i.dq)(n),r=(0,i.F)(t),o=(0,i.Jh)(t);(0,i.jU)(["u","d"],(function(t){(0,i.jU)(["l","r"],(function(s){var d,u=t+s,a=e[u];if(a!==n){var c=(0,i.dq)(a);(d="l"===s?r-(0,i.F)(c):o-(0,i.Jh)(c))&&(e[u]=(0,i.LN)(a,(function(e){return e+d})))}}))}))}function tn(e,n){return(0,i.LN)(e.ul,(function(t,r){if(n)return e[n.toLowerCase()][r];var o=(0,i.u9)((0,i.LG)(e,r));return(o[1]+o[2])/2}))}function rn(e){var n,t=h(e),r=(0,o.ds)(Ae(e,t),Je(e,t)),s={};(0,i.jU)(["u","d"],(function(o){n="u"===o?t:(0,i.dq)(t).reverse(),(0,i.jU)(["l","r"],(function(t){"r"===t&&(n=(0,i.LG)(n,(function(e){return(0,i.dq)(e).reverse()})));var d=("u"===o?e.predecessors:e.successors).bind(e),u=Ze(0,n,r,d),a=Qe(e,n,u.root,u.align,"r"===t);"r"===t&&(a=(0,i.LN)(a,(function(e){return-e}))),s[o+t]=a}))}));var d=en(e,s);return nn(s,d),tn(s,e.graph().align)}function on(e,n,t){return function(r,o,s){var d,u=r.node(o),a=r.node(s),c=0;if(c+=u.width/2,(0,i.ly)(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":d=-u.width/2;break;case"r":d=u.width/2}if(d&&(c+=t?d:-d),d=0,c+=(u.dummy?n:e)/2,c+=(a.dummy?n:e)/2,c+=a.width/2,(0,i.ly)(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":d=a.width/2;break;case"r":d=-a.width/2}return d&&(c+=t?d:-d),d=0,c}}function sn(e,n){return e.node(n).width}function dn(e){un(e=a(e)),(0,i.uv)(rn(e),(function(n,t){e.node(t).x=n}))}function un(e){var n=h(e),t=e.graph().ranksep,r=0;(0,i.jU)(n,(function(n){var o=(0,i.Jh)((0,i.LG)(n,(function(n){return e.node(n).height})));(0,i.jU)(n,(function(n){e.node(n).y=r+o/2})),r+=o+t}))}function an(e,n){var t=n&&n.debugTiming?m:w;t("layout",(function(){var n=t("  buildLayoutGraph",(function(){return yn(e)}));t("  runLayout",(function(){cn(n,t)})),t("  updateInputGraph",(function(){hn(e,n)}))}))}function cn(e,n){n("    makeSpaceForEdgeLabels",(function(){_n(e)})),n("    removeSelfEdges",(function(){Cn(e)})),n("    acyclic",(function(){F(e)})),n("    nestingGraph.run",(function(){we(e)})),n("    rank",(function(){le(a(e))})),n("    injectEdgeLabelProxies",(function(){Kn(e)})),n("    removeEmptyRanks",(function(){g(e)})),n("    nestingGraph.cleanup",(function(){Ke(e)})),n("    normalizeRanks",(function(){f(e)})),n("    assignRankMinMax",(function(){jn(e)})),n("    removeEdgeLabelProxies",(function(){En(e)})),n("    normalize.run",(function(){D(e)})),n("    parentDummyChains",(function(){Ye(e)})),n("    addBorderSegments",(function(){b(e)})),n("    order",(function(){Oe(e)})),n("    insertSelfEdges",(function(){Tn(e)})),n("    adjustCoordinateSystem",(function(){_(e)})),n("    position",(function(){dn(e)})),n("    positionSelfEdges",(function(){Rn(e)})),n("    removeBorderNodes",(function(){Ln(e)})),n("    normalize.undo",(function(){Y(e)})),n("    fixupEdgeLabelCoords",(function(){Nn(e)})),n("    undoCoordinateSystem",(function(){K(e)})),n("    translateGraph",(function(){Un(e)})),n("    assignNodeIntersects",(function(){kn(e)})),n("    reversePoints",(function(){xn(e)})),n("    acyclic.undo",(function(){P(e)}))}function hn(e,n){(0,i.jU)(e.nodes(),(function(t){var r=e.node(t),i=n.node(t);r&&(r.x=i.x,r.y=i.y,n.children(t).length&&(r.width=i.width,r.height=i.height))})),(0,i.jU)(e.edges(),(function(t){var r=e.edge(t),o=n.edge(t);r.points=o.points,(0,i.ly)(o,"x")&&(r.x=o.x,r.y=o.y)})),e.graph().width=n.graph().width,e.graph().height=n.graph().height}(0,s.K2)(pe,"tightTreeRanker"),(0,s.K2)(me,"networkSimplexRanker"),(0,s.K2)(we,"run"),(0,s.K2)(be,"dfs"),(0,s.K2)(ye,"treeDepths"),(0,s.K2)(_e,"sumWeights"),(0,s.K2)(Ke,"cleanup"),(0,s.K2)(je,"addSubgraphConstraints"),(0,s.K2)(Ee,"buildLayerGraph"),(0,s.K2)(Ue,"createRootNode"),(0,s.K2)(ke,"crossCount"),(0,s.K2)(Ne,"twoLayerCrossCount"),(0,s.K2)(xe,"initOrder"),(0,s.K2)(Le,"barycenter"),(0,s.K2)(Ce,"resolveConflicts"),(0,s.K2)(Te,"doResolveConflicts"),(0,s.K2)(Re,"mergeEntries"),(0,s.K2)(Ie,"sort"),(0,s.K2)(Ge,"consumeUnsortable"),(0,s.K2)(Se,"compareWithBias"),(0,s.K2)(Me,"sortSubgraph"),(0,s.K2)(Be,"expandSubgraphs"),(0,s.K2)(Fe,"mergeBarycenters"),(0,s.K2)(Oe,"order"),(0,s.K2)(Pe,"buildLayerGraphs"),(0,s.K2)(De,"sweepLayerGraphs"),(0,s.K2)(ze,"assignOrder"),(0,s.K2)(Ye,"parentDummyChains"),(0,s.K2)(qe,"findPath"),(0,s.K2)(Ve,"postorder"),(0,s.K2)(Ae,"findType1Conflicts"),(0,s.K2)(Je,"findType2Conflicts"),(0,s.K2)(We,"findOtherInnerSegmentNode"),(0,s.K2)(Xe,"addConflict"),(0,s.K2)(He,"hasConflict"),(0,s.K2)(Ze,"verticalAlignment"),(0,s.K2)(Qe,"horizontalCompaction"),(0,s.K2)($e,"buildBlockGraph"),(0,s.K2)(en,"findSmallestWidthAlignment"),(0,s.K2)(nn,"alignCoordinates"),(0,s.K2)(tn,"balance"),(0,s.K2)(rn,"positionX"),(0,s.K2)(on,"sep"),(0,s.K2)(sn,"width"),(0,s.K2)(dn,"position"),(0,s.K2)(un,"positionY"),(0,s.K2)(an,"layout"),(0,s.K2)(cn,"runLayout"),(0,s.K2)(hn,"updateInputGraph");var fn=["nodesep","edgesep","ranksep","marginx","marginy"],gn={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ln=["acyclicer","ranker","rankdir","align"],vn=["width","height"],pn={width:0,height:0},mn=["minlen","weight","width","height","labeloffset"],wn={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},bn=["labelpos"];function yn(e){var n=new r.T({multigraph:!0,compound:!0}),t=Gn(e.graph());return n.setGraph((0,o.ds)({},gn,In(t,fn),(0,i.su)(t,ln))),(0,i.jU)(e.nodes(),(function(t){var r=Gn(e.node(t));n.setNode(t,(0,i.N0)(In(r,vn),pn)),n.setParent(t,e.parent(t))})),(0,i.jU)(e.edges(),(function(t){var r=Gn(e.edge(t));n.setEdge(t,(0,o.ds)({},wn,In(r,mn),(0,i.su)(r,bn)))})),n}function _n(e){var n=e.graph();n.ranksep/=2,(0,i.jU)(e.edges(),(function(t){var r=e.edge(t);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}function Kn(e){(0,i.jU)(e.edges(),(function(n){var t=e.edge(n);if(t.width&&t.height){var r=e.node(n.v),i={rank:(e.node(n.w).rank-r.rank)/2+r.rank,e:n};d(e,"edge-proxy",i,"_ep")}}))}function jn(e){var n=0;(0,i.jU)(e.nodes(),(function(t){var r=e.node(t);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,n=(0,i.Jh)(n,r.maxRank))})),e.graph().maxRank=n}function En(e){(0,i.jU)(e.nodes(),(function(n){var t=e.node(n);"edge-proxy"===t.dummy&&(e.edge(t.e).labelRank=t.rank,e.removeNode(n))}))}function Un(e){var n=Number.POSITIVE_INFINITY,t=0,r=Number.POSITIVE_INFINITY,o=0,d=e.graph(),u=d.marginx||0,a=d.marginy||0;function c(e){var i=e.x,s=e.y,d=e.width,u=e.height;n=Math.min(n,i-d/2),t=Math.max(t,i+d/2),r=Math.min(r,s-u/2),o=Math.max(o,s+u/2)}(0,s.K2)(c,"getExtremes"),(0,i.jU)(e.nodes(),(function(n){c(e.node(n))})),(0,i.jU)(e.edges(),(function(n){var t=e.edge(n);(0,i.ly)(t,"x")&&c(t)})),n-=u,r-=a,(0,i.jU)(e.nodes(),(function(t){var i=e.node(t);i.x-=n,i.y-=r})),(0,i.jU)(e.edges(),(function(t){var o=e.edge(t);(0,i.jU)(o.points,(function(e){e.x-=n,e.y-=r})),(0,i.ly)(o,"x")&&(o.x-=n),(0,i.ly)(o,"y")&&(o.y-=r)})),d.width=t-n+u,d.height=o-r+a}function kn(e){(0,i.jU)(e.edges(),(function(n){var t,r,i=e.edge(n),o=e.node(n.v),s=e.node(n.w);i.points?(t=i.points[0],r=i.points[i.points.length-1]):(i.points=[],t=s,r=o),i.points.unshift(c(o,t)),i.points.push(c(s,r))}))}function Nn(e){(0,i.jU)(e.edges(),(function(n){var t=e.edge(n);if((0,i.ly)(t,"x"))switch("l"!==t.labelpos&&"r"!==t.labelpos||(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset}}))}function xn(e){(0,i.jU)(e.edges(),(function(n){var t=e.edge(n);t.reversed&&t.points.reverse()}))}function Ln(e){(0,i.jU)(e.nodes(),(function(n){if(e.children(n).length){var t=e.node(n),r=e.node(t.borderTop),o=e.node(t.borderBottom),s=e.node((0,i.fK)(t.borderLeft)),d=e.node((0,i.fK)(t.borderRight));t.width=Math.abs(d.x-s.x),t.height=Math.abs(o.y-r.y),t.x=s.x+t.width/2,t.y=r.y+t.height/2}})),(0,i.jU)(e.nodes(),(function(n){"border"===e.node(n).dummy&&e.removeNode(n)}))}function Cn(e){(0,i.jU)(e.edges(),(function(n){if(n.v===n.w){var t=e.node(n.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:n,label:e.edge(n)}),e.removeEdge(n)}}))}function Tn(e){var n=h(e);(0,i.jU)(n,(function(n){var t=0;(0,i.jU)(n,(function(n,r){var o=e.node(n);o.order=r+t,(0,i.jU)(o.selfEdges,(function(n){d(e,"selfedge",{width:n.label.width,height:n.label.height,rank:o.rank,order:r+ ++t,e:n.e,label:n.label},"_se")})),delete o.selfEdges}))}))}function Rn(e){(0,i.jU)(e.nodes(),(function(n){var t=e.node(n);if("selfedge"===t.dummy){var r=e.node(t.e.v),i=r.x+r.width/2,o=r.y,s=t.x-i,d=r.height/2;e.setEdge(t.e,t.label),e.removeNode(n),t.label.points=[{x:i+2*s/3,y:o-d},{x:i+5*s/6,y:o-d},{x:i+s,y:o},{x:i+5*s/6,y:o+d},{x:i+2*s/3,y:o+d}],t.label.x=t.x,t.label.y=t.y}}))}function In(e,n){return(0,i.LN)((0,i.su)(e,n),Number)}function Gn(e){var n={};return(0,i.jU)(e,(function(e,t){n[t.toLowerCase()]=e})),n}(0,s.K2)(yn,"buildLayoutGraph"),(0,s.K2)(_n,"makeSpaceForEdgeLabels"),(0,s.K2)(Kn,"injectEdgeLabelProxies"),(0,s.K2)(jn,"assignRankMinMax"),(0,s.K2)(En,"removeEdgeLabelProxies"),(0,s.K2)(Un,"translateGraph"),(0,s.K2)(kn,"assignNodeIntersects"),(0,s.K2)(Nn,"fixupEdgeLabelCoords"),(0,s.K2)(xn,"reversePointsForReversedEdges"),(0,s.K2)(Ln,"removeBorderNodes"),(0,s.K2)(Cn,"removeSelfEdges"),(0,s.K2)(Tn,"insertSelfEdges"),(0,s.K2)(Rn,"positionSelfEdges"),(0,s.K2)(In,"selectNumberAttrs"),(0,s.K2)(Gn,"canonicalize")}}]);