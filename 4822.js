"use strict";(self.webpackChunkonsenui_v2_react_minimum=self.webpackChunkonsenui_v2_react_minimum||[]).push([[4822],{4822:(t,e,r)=>{r.d(e,{diagram:()=>_t});var n=r(9199),a=(r(3706),r(8396),r(2725)),i=(r(6404),r(3723)),s=r(4413),o=r(1265),l=(r(3615),r(57)),d=(r(5070),r(772)),c=(r(8605),r(6009)),h={normal:f,vee:p,undirected:g};function u(t){h=t}function f(t,e,r,a){var i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");(0,n.AV)(i,r[a+"Style"]),r[a+"Class"]&&i.attr("class",r[a+"Class"])}function p(t,e,r,a){var i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");(0,n.AV)(i,r[a+"Style"]),r[a+"Class"]&&i.attr("class",r[a+"Class"])}function g(t,e,r,a){var i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");(0,n.AV)(i,r[a+"Style"]),r[a+"Class"]&&i.attr("class",r[a+"Class"])}function y(t,e){var r=t;return r.node().appendChild(e.label),(0,n.AV)(r,e.labelStyle),r}function x(t,e){for(var r=t.append("text"),a=b(e.label).split("\n"),i=0;i<a.length;i++)r.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(a[i]);return(0,n.AV)(r,e.labelStyle),r}function b(t){for(var e,r="",n=!1,a=0;a<t.length;++a)e=t[a],n?(r+="n"===e?"\n":e,n=!1):"\\"===e?n=!0:r+=e;return r}function w(t,e,r){var a=e.label,i=t.append("g");"svg"===e.labelType?y(i,e):"string"!=typeof a||"html"===e.labelType?(0,n.Hx)(i,e):x(i,e);var s,o=i.node().getBBox();switch(r){case"top":s=-e.height/2;break;case"bottom":s=e.height/2-o.height;break;default:s=-o.height/2}return i.attr("transform","translate("+-o.width/2+","+s+")"),i}(0,c.K2)(u,"setArrows"),(0,c.K2)(f,"normal"),(0,c.K2)(p,"vee"),(0,c.K2)(g,"undirected"),(0,c.K2)(y,"addSVGLabel"),(0,c.K2)(x,"addTextLabel"),(0,c.K2)(b,"processEscapeSequences"),(0,c.K2)(w,"addLabel");var v=(0,c.K2)((function(t,e){var r=e.nodes().filter((function(t){return(0,n.De)(e,t)})),a=t.selectAll("g.cluster").data(r,(function(t){return t}));(0,n.c$)(a.exit(),e).style("opacity",0).remove();var i=a.enter().append("g").attr("class","cluster").attr("id",(function(t){return e.node(t).id})).style("opacity",0).each((function(t){var r=e.node(t),n=(0,d.df)(this);(0,d.df)(this).append("rect"),w(n.append("g").attr("class","label"),r,r.clusterLabelPos)}));return a=a.merge(i),(a=(0,n.c$)(a,e).style("opacity",1)).selectAll("rect").each((function(t){var r=e.node(t),a=(0,d.df)(this);(0,n.AV)(a,r.style)})),a}),"createClusters");function m(t){v=t}(0,c.K2)(m,"setCreateClusters");var k=(0,c.K2)((function(t,e){var r,a=t.selectAll("g.edgeLabel").data(e.edges(),(function(t){return(0,n.gh)(t)})).classed("update",!0);return a.exit().remove(),a.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(a=t.selectAll("g.edgeLabel")).each((function(t){var r=(0,d.df)(this);r.select(".label").remove();var n=e.edge(t),a=w(r,e.edge(t),0).classed("label",!0),i=a.node().getBBox();n.labelId&&a.attr("id",n.labelId),(0,o.ly)(n,"width")||(n.width=i.width),(0,o.ly)(n,"height")||(n.height=i.height)})),r=a.exit?a.exit():a.selectAll(null),(0,n.c$)(r,e).style("opacity",0).remove(),a}),"createEdgeLabels");function K(t){k=t}function _(t,e){return t.intersect(e)}(0,c.K2)(K,"setCreateEdgeLabels"),(0,c.K2)(_,"intersectNode");var S=(0,c.K2)((function(t,e,r){var a=t.selectAll("g.edgePath").data(e.edges(),(function(t){return(0,n.gh)(t)})).classed("update",!0),i=T(a,e);C(a,e);var s=void 0!==a.merge?a.merge(i):a;return(0,n.c$)(s,e).style("opacity",1),s.each((function(t){var r=(0,d.df)(this),a=e.edge(t);a.elem=this,a.id&&r.attr("id",a.id),(0,n.nh)(r,a.class,(r.classed("update")?"update ":"")+"edgePath")})),s.selectAll("path.path").each((function(t){var r=e.edge(t);r.arrowheadId=(0,o.Re)("arrowhead");var a=(0,d.df)(this).attr("marker-end",(function(){return"url("+L(location.href,r.arrowheadId)+")"})).style("fill","none");(0,n.c$)(a,e).attr("d",(function(t){return N(e,t)})),(0,n.AV)(a,r.style)})),s.selectAll("defs *").remove(),s.selectAll("defs").each((function(t){var n=e.edge(t);(0,r[n.arrowhead])((0,d.df)(this),n.arrowheadId,n,"arrowhead")})),s}),"createEdgePaths");function A(t){S=t}function L(t,e){return t.split("#")[0]+"#"+e}function N(t,e){var r=t.edge(e),n=t.node(e.v),a=t.node(e.w),i=r.points.slice(1,r.points.length-1);return i.unshift(_(n,i[0])),i.push(_(a,i[i.length-1])),E(r,i)}function E(t,e){var r=(d.pG||d.JW.line)().x((function(t){return t.x})).y((function(t){return t.y}));return(r.curve||r.interpolate)(t.curve),r(e)}function I(t){var e=t.getBBox(),r=t.ownerSVGElement.getScreenCTM().inverse().multiply(t.getScreenCTM()).translate(e.width/2,e.height/2);return{x:r.e,y:r.f}}function T(t,e){var r=t.enter().append("g").attr("class","edgePath").style("opacity",0);return r.append("path").attr("class","path").attr("d",(function(t){var r=e.edge(t),n=e.node(t.v).elem;return E(r,(0,o.EB)(r.points.length).map((function(){return I(n)})))})),r.append("defs"),r}function C(t,e){var r=t.exit();(0,n.c$)(r,e).style("opacity",0).remove()}(0,c.K2)(A,"setCreateEdgePaths"),(0,c.K2)(L,"makeFragmentRef"),(0,c.K2)(N,"calcPoints"),(0,c.K2)(E,"createLine"),(0,c.K2)(I,"getCoords"),(0,c.K2)(T,"enter"),(0,c.K2)(C,"exit");var M=(0,c.K2)((function(t,e,r){var a,i=e.nodes().filter((function(t){return!(0,n.De)(e,t)})),s=t.selectAll("g.node").data(i,(function(t){return t})).classed("update",!0);return s.exit().remove(),s.enter().append("g").attr("class","node").style("opacity",0),(s=t.selectAll("g.node")).each((function(t){var a=e.node(t),i=(0,d.df)(this);(0,n.nh)(i,a.class,(i.classed("update")?"update ":"")+"node"),i.select("g.label").remove();var s=i.append("g").attr("class","label"),l=w(s,a),c=r[a.shape],h=(0,o.su)(l.node().getBBox(),"width","height");a.elem=this,a.id&&i.attr("id",a.id),a.labelId&&s.attr("id",a.labelId),(0,o.ly)(a,"width")&&(h.width=a.width),(0,o.ly)(a,"height")&&(h.height=a.height),h.width+=a.paddingLeft+a.paddingRight,h.height+=a.paddingTop+a.paddingBottom,s.attr("transform","translate("+(a.paddingLeft-a.paddingRight)/2+","+(a.paddingTop-a.paddingBottom)/2+")");var u=(0,d.df)(this);u.select(".label-container").remove();var f=c(u,h,a).classed("label-container",!0);(0,n.AV)(f,a.style);var p=f.node().getBBox();a.width=p.width,a.height=p.height})),a=s.exit?s.exit():s.selectAll(null),(0,n.c$)(a,e).style("opacity",0).remove(),s}),"createNodes");function B(t){M=t}function R(t,e){var r=t.filter((function(){return!(0,d.df)(this).classed("update")}));function a(t){var r=e.node(t);return"translate("+r.x+","+r.y+")"}(0,c.K2)(a,"translate"),r.attr("transform",a),(0,n.c$)(t,e).style("opacity",1).attr("transform",a),(0,n.c$)(r.selectAll("rect"),e).attr("width",(function(t){return e.node(t).width})).attr("height",(function(t){return e.node(t).height})).attr("x",(function(t){return-e.node(t).width/2})).attr("y",(function(t){return-e.node(t).height/2}))}function D(t,e){var r=t.filter((function(){return!(0,d.df)(this).classed("update")}));function a(t){var r=e.edge(t);return(0,o.ly)(r,"x")?"translate("+r.x+","+r.y+")":""}(0,c.K2)(a,"translate"),r.attr("transform",a),(0,n.c$)(t,e).style("opacity",1).attr("transform",a)}function V(t,e){var r=t.filter((function(){return!(0,d.df)(this).classed("update")}));function a(t){var r=e.node(t);return"translate("+r.x+","+r.y+")"}(0,c.K2)(a,"translate"),r.attr("transform",a),(0,n.c$)(t,e).style("opacity",1).attr("transform",a)}function $(t,e,r,n){var a=t.x,i=t.y,s=a-n.x,o=i-n.y,l=Math.sqrt(e*e*o*o+r*r*s*s),d=Math.abs(e*r*s/l);n.x<a&&(d=-d);var c=Math.abs(e*r*o/l);return n.y<i&&(c=-c),{x:a+d,y:i+c}}function U(t,e,r){return $(t,e,e,r)}function P(t,e,r,n){var a,i,s,o,l,d,c,h,u,f,p,g,y;if(a=e.y-t.y,s=t.x-e.x,l=e.x*t.y-t.x*e.y,u=a*r.x+s*r.y+l,f=a*n.x+s*n.y+l,!(0!==u&&0!==f&&W(u,f)||(i=n.y-r.y,o=r.x-n.x,d=n.x*r.y-r.x*n.y,c=i*t.x+o*t.y+d,h=i*e.x+o*e.y+d,0!==c&&0!==h&&W(c,h)||0==(p=a*o-i*s))))return g=Math.abs(p/2),{x:(y=s*d-o*l)<0?(y-g)/p:(y+g)/p,y:(y=i*l-a*d)<0?(y-g)/p:(y+g)/p}}function W(t,e){return t*e>0}function z(t,e,r){var n=t.x,a=t.y,i=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;e.forEach((function(t){s=Math.min(s,t.x),o=Math.min(o,t.y)}));for(var l=n-t.width/2-s,d=a-t.height/2-o,c=0;c<e.length;c++){var h=e[c],u=e[c<e.length-1?c+1:0],f=P(t,r,{x:l+h.x,y:d+h.y},{x:l+u.x,y:d+u.y});f&&i.push(f)}return i.length?(i.length>1&&i.sort((function(t,e){var n=t.x-r.x,a=t.y-r.y,i=Math.sqrt(n*n+a*a),s=e.x-r.x,o=e.y-r.y,l=Math.sqrt(s*s+o*o);return i<l?-1:i===l?0:1})),i[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}function Y(t,e){var r,n,a=t.x,i=t.y,s=e.x-a,o=e.y-i,l=t.width/2,d=t.height/2;return Math.abs(o)*l>Math.abs(s)*d?(o<0&&(d=-d),r=0===o?0:d*s/o,n=d):(s<0&&(l=-l),r=l,n=0===s?0:l*o/s),{x:a+r,y:i+n}}(0,c.K2)(B,"setCreateNodes"),(0,c.K2)(R,"positionClusters"),(0,c.K2)(D,"positionEdgeLabels"),(0,c.K2)(V,"positionNodes"),(0,c.K2)($,"intersectEllipse"),(0,c.K2)(U,"intersectCircle"),(0,c.K2)(P,"intersectLine"),(0,c.K2)(W,"sameSign"),(0,c.K2)(z,"intersectPolygon"),(0,c.K2)(Y,"intersectRect");var q={rect:H,ellipse:O,circle:X,diamond:j};function G(t){q=t}function H(t,e,r){var n=t.insert("rect",":first-child").attr("rx",r.rx).attr("ry",r.ry).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return r.intersect=function(t){return Y(r,t)},n}function O(t,e,r){var n=e.width/2,a=e.height/2,i=t.insert("ellipse",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("rx",n).attr("ry",a);return r.intersect=function(t){return $(r,n,a,t)},i}function X(t,e,r){var n=Math.max(e.width,e.height)/2,a=t.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",n);return r.intersect=function(t){return U(r,n,t)},a}function j(t,e,r){var n=e.width*Math.SQRT2/2,a=e.height*Math.SQRT2/2,i=[{x:0,y:-a},{x:-n,y:0},{x:0,y:a},{x:n,y:0}],s=t.insert("polygon",":first-child").attr("points",i.map((function(t){return t.x+","+t.y})).join(" "));return r.intersect=function(t){return z(r,i,t)},s}function F(){var t=(0,c.K2)((function(t,e){Z(e);var r=et(t,"output"),n=et(r,"clusters"),a=et(r,"edgePaths"),s=k(et(r,"edgeLabels"),e),o=M(et(r,"nodes"),e,q);(0,i.Z)(e),V(o,e),D(s,e),S(a,e,h),R(v(n,e),e),tt(e)}),"fn");return t.createNodes=function(e){return arguments.length?(B(e),t):M},t.createClusters=function(e){return arguments.length?(m(e),t):v},t.createEdgeLabels=function(e){return arguments.length?(K(e),t):k},t.createEdgePaths=function(e){return arguments.length?(A(e),t):S},t.shapes=function(e){return arguments.length?(G(e),t):q},t.arrows=function(e){return arguments.length?(u(e),t):h},t}(0,c.K2)(G,"setShapes"),(0,c.K2)(H,"rect"),(0,c.K2)(O,"ellipse"),(0,c.K2)(X,"circle"),(0,c.K2)(j,"diamond"),(0,c.K2)(F,"render");var J={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},Q={arrowhead:"normal",curve:d.AS};function Z(t){t.nodes().forEach((function(e){var r=t.node(e);(0,o.ly)(r,"label")||t.children(e).length||(r.label=e),(0,o.ly)(r,"paddingX")&&(0,o.N0)(r,{paddingLeft:r.paddingX,paddingRight:r.paddingX}),(0,o.ly)(r,"paddingY")&&(0,o.N0)(r,{paddingTop:r.paddingY,paddingBottom:r.paddingY}),(0,o.ly)(r,"padding")&&(0,o.N0)(r,{paddingLeft:r.padding,paddingRight:r.padding,paddingTop:r.padding,paddingBottom:r.padding}),(0,o.N0)(r,J),(0,o.jU)(["paddingLeft","paddingRight","paddingTop","paddingBottom"],(function(t){r[t]=Number(r[t])})),(0,o.ly)(r,"width")&&(r._prevWidth=r.width),(0,o.ly)(r,"height")&&(r._prevHeight=r.height)})),t.edges().forEach((function(e){var r=t.edge(e);(0,o.ly)(r,"label")||(r.label=""),(0,o.N0)(r,Q)}))}function tt(t){(0,o.jU)(t.nodes(),(function(e){var r=t.node(e);(0,o.ly)(r,"_prevWidth")?r.width=r._prevWidth:delete r.width,(0,o.ly)(r,"_prevHeight")?r.height=r._prevHeight:delete r.height,delete r._prevWidth,delete r._prevHeight}))}function et(t,e){var r=t.select("g."+e);return r.empty()&&(r=t.append("g").attr("class",e)),r}function rt(t,e,r){const n=.9*(e.width+e.height),a=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}],i=gt(t,n,n,a);return r.intersect=function(t){return z(r,a,t)},i}function nt(t,e,r){const n=e.height,a=n/4,i=e.width+2*a,s=[{x:a,y:0},{x:i-a,y:0},{x:i,y:-n/2},{x:i-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}],o=gt(t,i,n,s);return r.intersect=function(t){return z(r,s,t)},o}function at(t,e,r){const n=e.width,a=e.height,i=[{x:-a/2,y:0},{x:n,y:0},{x:n,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}],s=gt(t,n,a,i);return r.intersect=function(t){return z(r,i,t)},s}function it(t,e,r){const n=e.width,a=e.height,i=[{x:-2*a/6,y:0},{x:n-a/6,y:0},{x:n+2*a/6,y:-a},{x:a/6,y:-a}],s=gt(t,n,a,i);return r.intersect=function(t){return z(r,i,t)},s}function st(t,e,r){const n=e.width,a=e.height,i=[{x:2*a/6,y:0},{x:n+a/6,y:0},{x:n-2*a/6,y:-a},{x:-a/6,y:-a}],s=gt(t,n,a,i);return r.intersect=function(t){return z(r,i,t)},s}function ot(t,e,r){const n=e.width,a=e.height,i=[{x:-2*a/6,y:0},{x:n+2*a/6,y:0},{x:n-a/6,y:-a},{x:a/6,y:-a}],s=gt(t,n,a,i);return r.intersect=function(t){return z(r,i,t)},s}function lt(t,e,r){const n=e.width,a=e.height,i=[{x:a/6,y:0},{x:n-a/6,y:0},{x:n+2*a/6,y:-a},{x:-2*a/6,y:-a}],s=gt(t,n,a,i);return r.intersect=function(t){return z(r,i,t)},s}function dt(t,e,r){const n=e.width,a=e.height,i=[{x:0,y:0},{x:n+a/2,y:0},{x:n,y:-a/2},{x:n+a/2,y:-a},{x:0,y:-a}],s=gt(t,n,a,i);return r.intersect=function(t){return z(r,i,t)},s}function ct(t,e,r){const n=e.height,a=e.width+n/4,i=t.insert("rect",":first-child").attr("rx",n/2).attr("ry",n/2).attr("x",-a/2).attr("y",-n/2).attr("width",a).attr("height",n);return r.intersect=function(t){return Y(r,t)},i}function ht(t,e,r){const n=e.width,a=e.height,i=[{x:0,y:0},{x:n,y:0},{x:n,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:n+8,y:0},{x:n+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],s=gt(t,n,a,i);return r.intersect=function(t){return z(r,i,t)},s}function ut(t,e,r){const n=e.width,a=n/2,i=a/(2.5+n/50),s=e.height+i,o="M 0,"+i+" a "+a+","+i+" 0,0,0 "+n+" 0 a "+a+","+i+" 0,0,0 "+-n+" 0 l 0,"+s+" a "+a+","+i+" 0,0,0 "+n+" 0 l 0,"+-s,l=t.attr("label-offset-y",i).insert("path",":first-child").attr("d",o).attr("transform","translate("+-n/2+","+-(s/2+i)+")");return r.intersect=function(t){const e=Y(r,t),n=e.x-r.x;if(0!=a&&(Math.abs(n)<r.width/2||Math.abs(n)==r.width/2&&Math.abs(e.y-r.y)>r.height/2-i)){let s=i*i*(1-n*n/(a*a));0!=s&&(s=Math.sqrt(s)),s=i-s,t.y-r.y>0&&(s=-s),e.y+=s}return e},l}function ft(t){t.shapes().question=rt,t.shapes().hexagon=nt,t.shapes().stadium=ct,t.shapes().subroutine=ht,t.shapes().cylinder=ut,t.shapes().rect_left_inv_arrow=at,t.shapes().lean_right=it,t.shapes().lean_left=st,t.shapes().trapezoid=ot,t.shapes().inv_trapezoid=lt,t.shapes().rect_right_inv_arrow=dt}function pt(t){t({question:rt}),t({hexagon:nt}),t({stadium:ct}),t({subroutine:ht}),t({cylinder:ut}),t({rect_left_inv_arrow:at}),t({lean_right:it}),t({lean_left:st}),t({trapezoid:ot}),t({inv_trapezoid:lt}),t({rect_right_inv_arrow:dt})}function gt(t,e,r,n){return t.insert("polygon",":first-child").attr("points",n.map((function(t){return t.x+","+t.y})).join(" ")).attr("transform","translate("+-e/2+","+r/2+")")}(0,c.K2)(Z,"preProcessGraph"),(0,c.K2)(tt,"postProcessGraph"),(0,c.K2)(et,"createOrSelectGroup"),(0,c.K2)(rt,"question"),(0,c.K2)(nt,"hexagon"),(0,c.K2)(at,"rect_left_inv_arrow"),(0,c.K2)(it,"lean_right"),(0,c.K2)(st,"lean_left"),(0,c.K2)(ot,"trapezoid"),(0,c.K2)(lt,"inv_trapezoid"),(0,c.K2)(dt,"rect_right_inv_arrow"),(0,c.K2)(ct,"stadium"),(0,c.K2)(ht,"subroutine"),(0,c.K2)(ut,"cylinder"),(0,c.K2)(ft,"addToRender"),(0,c.K2)(pt,"addToRenderV2"),(0,c.K2)(gt,"insertPolygonShape");var yt={addToRender:ft,addToRenderV2:pt},xt={},bt=(0,c.K2)((function(t){const e=Object.keys(t);for(const r of e)xt[r]=t[r]}),"setConf"),wt=(0,c.K2)((async function(t,e,r,i,s,o){const c=i?i.select(`[id="${r}"]`):(0,d.df)(`[id="${r}"]`),h=s||document,u=Object.keys(t);for(const r of u){const i=t[r];let s="default";i.classes.length>0&&(s=i.classes.join(" "));const u=(0,l.sM)(i.styles);let f,p=void 0!==i.text?i.text:i.id;if((0,d._3)((0,d.D7)().flowchart.htmlLabels)){const t=(0,a.hE)(p),e={label:await(0,d.VJ)(t,(0,d.D7)())};f=(0,n.Hx)(c,e).node(),f.parentNode.removeChild(f)}else{const t=h.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",u.labelStyle.replace("color:","fill:"));const e=p.split(d.Y2.lineBreakRegex);for(const r of e){const e=h.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","1"),e.textContent=r,t.appendChild(e)}f=t}let g=0,y="";switch(i.type){case"round":g=5,y="rect";break;case"square":case"group":default:y="rect";break;case"diamond":y="question";break;case"hexagon":y="hexagon";break;case"odd":case"odd_right":y="rect_left_inv_arrow";break;case"lean_right":y="lean_right";break;case"lean_left":y="lean_left";break;case"trapezoid":y="trapezoid";break;case"inv_trapezoid":y="inv_trapezoid";break;case"circle":y="circle";break;case"ellipse":y="ellipse";break;case"stadium":y="stadium";break;case"subroutine":y="subroutine";break;case"cylinder":y="cylinder"}d.Rm.warn("Adding node",i.id,i.domId),e.setNode(o.db.lookUpDomId(i.id),{labelType:"svg",labelStyle:u.labelStyle,shape:y,label:f,rx:g,ry:g,class:s,style:u.style,id:o.db.lookUpDomId(i.id)})}}),"addVertices"),vt=(0,c.K2)((async function(t,e,r){let n,i,s=0;if(void 0!==t.defaultStyle){const e=(0,l.sM)(t.defaultStyle);n=e.style,i=e.labelStyle}for(const o of t){s++;const c=(0,l.rY)(o.start,o.end,{counter:s,prefix:"L"}),h="LS-"+o.start,u="LE-"+o.end,f={};"arrow_open"===o.type?f.arrowhead="none":f.arrowhead="normal";let p="",g="";if(void 0!==o.style){const t=(0,l.sM)(o.style);p=t.style,g=t.labelStyle}else switch(o.stroke){case"normal":p="fill:none",void 0!==n&&(p=n),void 0!==i&&(g=i);break;case"dotted":p="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":p=" stroke-width: 3.5px;fill:none"}f.style=p,f.labelStyle=g,void 0!==o.interpolate?f.curve=(0,l.Ib)(o.interpolate,d.AS):void 0!==t.defaultInterpolate?f.curve=(0,l.Ib)(t.defaultInterpolate,d.AS):f.curve=(0,l.Ib)(xt.curve,d.AS),void 0===o.text?void 0!==o.style&&(f.arrowheadStyle="fill: #333"):(f.arrowheadStyle="fill: #333",f.labelpos="c",(0,d._3)((0,d.D7)().flowchart.htmlLabels)?(f.labelType="html",f.label=`<span id="L-${c}" class="edgeLabel L-${h}' L-${u}" style="${f.labelStyle}">${await(0,d.VJ)((0,a.hE)(o.text),(0,d.D7)())}</span>`):(f.labelType="text",f.label=o.text.replace(d.Y2.lineBreakRegex,"\n"),void 0===o.style&&(f.style=f.style||"stroke: #333; stroke-width: 1.5px;fill:none"),f.labelStyle=f.labelStyle.replace("color:","fill:"))),f.id=c,f.class=h+" "+u,f.minlen=o.length||1,e.setEdge(r.db.lookUpDomId(o.start),r.db.lookUpDomId(o.end),f,s)}}),"addEdges"),mt=(0,c.K2)((function(t,e){return d.Rm.info("Extracting classes"),e.db.getClasses()}),"getClasses"),kt=(0,c.K2)((async function(t,e,r,a){d.Rm.info("Drawing flowchart");const{securityLevel:i,flowchart:o}=(0,d.D7)();let l;"sandbox"===i&&(l=(0,d.df)("#i"+e));const h="sandbox"===i?(0,d.df)(l.nodes()[0].contentDocument.body):(0,d.df)("body"),u="sandbox"===i?l.nodes()[0].contentDocument:document;let f=a.db.getDirection();void 0===f&&(f="TD");const p=o.nodeSpacing||50,g=o.rankSpacing||50,y=new s.T({multigraph:!0,compound:!0}).setGraph({rankdir:f,nodesep:p,ranksep:g,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));let x;const b=a.db.getSubGraphs();for(let t=b.length-1;t>=0;t--)x=b[t],a.db.addVertex(x.id,x.title,"group",void 0,x.classes);const w=a.db.getVertices();d.Rm.warn("Get vertices",w);const v=a.db.getEdges();let m=0;for(m=b.length-1;m>=0;m--){x=b[m],(0,d.YA)("cluster").append("text");for(let t=0;t<x.nodes.length;t++)d.Rm.warn("Setting subgraph",x.nodes[t],a.db.lookUpDomId(x.nodes[t]),a.db.lookUpDomId(x.id)),y.setParent(a.db.lookUpDomId(x.nodes[t]),a.db.lookUpDomId(x.id))}await wt(w,y,e,h,u,a),await vt(v,y,a);const k=new F;yt.addToRender(k),k.arrows().none=(0,c.K2)((function(t,e,r,a){const i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");(0,n.AV)(i,r[a+"Style"])}),"normal"),k.arrows().normal=(0,c.K2)((function(t,e){t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"normal");const K=h.select(`[id="${e}"]`),_=h.select("#"+e+" g");for(k(_,y),_.selectAll("g.node").attr("title",(function(){return a.db.getTooltip(this.id)})),a.db.indexNodes("subGraph"+m),m=0;m<b.length;m++)if(x=b[m],"undefined"!==x.title){const t=u.querySelectorAll("#"+e+' [id="'+a.db.lookUpDomId(x.id)+'"] rect'),r=u.querySelectorAll("#"+e+' [id="'+a.db.lookUpDomId(x.id)+'"]'),n=t[0].x.baseVal.value,i=t[0].y.baseVal.value,s=t[0].width.baseVal.value,o=(0,d.df)(r[0]).select(".label");o.attr("transform",`translate(${n+s/2}, ${i+14})`),o.attr("id",e+"Text");for(let t=0;t<x.classes.length;t++)r[0].classList.add(x.classes[t])}if(!o.htmlLabels){const t=u.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const e of t){const t=e.getBBox(),r=u.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("rx",0),r.setAttribute("ry",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height),e.insertBefore(r,e.firstChild)}}(0,d.ot)(y,K,o.diagramPadding,o.useMaxWidth),[...w.keys()].forEach((function(t){const r=w.get(t);if(r.link){const n=h.select("#"+e+' [id="'+a.db.lookUpDomId(t)+'"]');if(n){const t=u.createElementNS("http://www.w3.org/2000/svg","a");t.setAttributeNS("http://www.w3.org/2000/svg","class",r.classes.join(" ")),t.setAttributeNS("http://www.w3.org/2000/svg","href",r.link),t.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===i?t.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):r.linkTarget&&t.setAttributeNS("http://www.w3.org/2000/svg","target",r.linkTarget);const e=n.insert((function(){return t}),":first-child"),a=n.select(".label-container");a&&e.append((function(){return a.node()}));const s=n.select(".label");s&&e.append((function(){return s.node()}))}}}))}),"draw"),Kt={setConf:bt,addVertices:wt,addEdges:vt,getClasses:mt,draw:kt},_t={parser:n.nA,db:n.Bi,renderer:n.bf,styles:n.tM,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Kt.setConf(t.flowchart),n.Bi.clear(),n.Bi.setGen("gen-1")}}}}]);